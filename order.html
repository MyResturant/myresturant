async function finalizeOrder() {
    let name = document.getElementById('cust-name').value;
    let hno = document.getElementById('house-no').value;
    let area = document.getElementById('area').value;
    let street = document.getElementById('street-address').value;
    let lmark = document.getElementById('landmark').value;
    let txn = document.getElementById('txn-id').value;
    let total = document.getElementById('total-val').innerText;
    let phone = prompt("Please enter your WhatsApp Number for order updates:");

    if(!name || !txn || !phone) return alert("❌ Mandatory fields missing!");

    let itemsSummary = "";
    for(let key in cart) { if(cart[key].qty > 0) itemsSummary += `${key}(${cart[key].qty}), `; }

    const payload = {
        name: name,
        phone: phone, // Customer's WhatsApp
        address: `${hno}, ${street}, ${area}. Landmark: ${lmark}`,
        items: itemsSummary,
        total: total,
        txnId: txn,
        status: "PENDING"
    };

    try {
        // RP Smart Sync Engine
        await fetch(CLOUD_API, { method: "POST", mode: "no-cors", body: JSON.stringify(payload) });
        alert("✅ Order Sent! Admin will contact you on WhatsApp shortly.");
        location.reload(); // Order complete
    } catch(e) { alert("Sync Error!"); }
}
